-- MySQL Script generated by MySQL Workbench
-- mié 21 nov 2018 10:28:39 WET
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`Medicamento`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Medicamento` (
  `Codigo` INT NOT NULL,
  `Nombre` VARCHAR(45) NULL,
  `Cantidad` INT NULL,
  `Precio` FLOAT NULL,
  `Receta` TINYINT NULL,
  `Familia` VARCHAR(45) NULL,
  PRIMARY KEY (`Codigo`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Laboratorio`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Laboratorio` (
  `Codigo` INT NOT NULL,
  `Fax` INT NULL,
  `Nombre` VARCHAR(45) NULL,
  `Nombre_Contacto` VARCHAR(45) NULL,
  `Telefono` INT NULL,
  `Direccion` VARCHAR(45) NULL,
  PRIMARY KEY (`Codigo`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Medicamento_Laboratorio`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Medicamento_Laboratorio` (
  `Codigo_m` INT NOT NULL,
  `Codigo_l` INT NOT NULL,
  PRIMARY KEY (`Codigo_m`, `Codigo_l`),
  INDEX `fk_Medicamento_Laboratorio_2_idx` (`Codigo_l` ASC),
  CONSTRAINT `fk_Medicamento_Laboratorio_1`
    FOREIGN KEY (`Codigo_m`)
    REFERENCES `mydb`.`Medicamento` (`Codigo`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Medicamento_Laboratorio_2`
    FOREIGN KEY (`Codigo_l`)
    REFERENCES `mydb`.`Laboratorio` (`Codigo`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Clientes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Clientes` (
  `DNI` VARCHAR(9) NOT NULL,
  `Fecha_pago` DATE NOT NULL,
  `Cuenta_bancaria` INT NULL,
  PRIMARY KEY (`DNI`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Factura`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Factura` (
  `Codigo` INT NOT NULL,
  `Fecha_compra` DATE NULL,
  `Importe` FLOAT NULL,
  `Unidades_vendidas` INT NULL,
  `dni_cliente` VARCHAR(9) NULL,
  PRIMARY KEY (`Codigo`),
  INDEX `fk_Factura_1_idx` (`dni_cliente` ASC),
  CONSTRAINT `fk_Factura_1`
    FOREIGN KEY (`dni_cliente`)
    REFERENCES `mydb`.`Clientes` (`DNI`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Medicamento_Factura`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Medicamento_Factura` (
  `Codigo_m` INT NOT NULL,
  `Codigo_f` INT NOT NULL,
  PRIMARY KEY (`Codigo_m`, `Codigo_f`),
  INDEX `fk_Medicamento_Factura_2_idx` (`Codigo_f` ASC),
  CONSTRAINT `fk_Medicamento_Factura_1`
    FOREIGN KEY (`Codigo_m`)
    REFERENCES `mydb`.`Medicamento` (`Codigo`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_Medicamento_Factura_2`
    FOREIGN KEY (`Codigo_f`)
    REFERENCES `mydb`.`Factura` (`Codigo`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `mydb`.`Medicamento`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Medicamento` (`Codigo`, `Nombre`, `Cantidad`, `Precio`, `Receta`, `Familia`) VALUES (0000001, 'Paracetamol', 20, 5,95, No, 'Analgésico');
INSERT INTO `mydb`.`Medicamento` (`Codigo`, `Nombre`, `Cantidad`, `Precio`, `Receta`, `Familia`) VALUES (0000002, 'Ibuprofeno', 30, 6,95, No, 'Analgésico');
INSERT INTO `mydb`.`Medicamento` (`Codigo`, `Nombre`, `Cantidad`, `Precio`, `Receta`, `Familia`) VALUES (0000003, 'Ontol', 10, 20,95, Sí, 'Anticoagulante');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Laboratorio`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Laboratorio` (`Codigo`, `Fax`, `Nombre`, `Nombre_Contacto`, `Telefono`, `Direccion`) VALUES (00001, 922451236, 'Pepe S.L.', 'ALberto', 638995696, 'Calle Pisito Nº02, Adeje');
INSERT INTO `mydb`.`Laboratorio` (`Codigo`, `Fax`, `Nombre`, `Nombre_Contacto`, `Telefono`, `Direccion`) VALUES (00002, 922635685, 'Isla', 'Irene', 922658541, 'Calle ALtamira Nº32, La Orotava');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Medicamento_Laboratorio`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Medicamento_Laboratorio` (`Codigo_m`, `Codigo_l`) VALUES (0000001, 00002);
INSERT INTO `mydb`.`Medicamento_Laboratorio` (`Codigo_m`, `Codigo_l`) VALUES (0000002, 00001);
INSERT INTO `mydb`.`Medicamento_Laboratorio` (`Codigo_m`, `Codigo_l`) VALUES (0000001, 00001);
INSERT INTO `mydb`.`Medicamento_Laboratorio` (`Codigo_m`, `Codigo_l`) VALUES (0000003, 00002);

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Clientes`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Clientes` (`DNI`, `Fecha_pago`, `Cuenta_bancaria`) VALUES ('45589700A', '12/06/2017', 7899555111);
INSERT INTO `mydb`.`Clientes` (`DNI`, `Fecha_pago`, `Cuenta_bancaria`) VALUES ('78956444X', '08/06/2012', 14415551555);

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Factura`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Factura` (`Codigo`, `Fecha_compra`, `Importe`, `Unidades_vendidas`, `dni_cliente`) VALUES (000001, '12/06/2012', 10,95, 2, '45589700A');
INSERT INTO `mydb`.`Factura` (`Codigo`, `Fecha_compra`, `Importe`, `Unidades_vendidas`, `dni_cliente`) VALUES (000002, '12/06/2012', 2,95, 3, '45589700A');
INSERT INTO `mydb`.`Factura` (`Codigo`, `Fecha_compra`, `Importe`, `Unidades_vendidas`, `dni_cliente`) VALUES (000003, '12/06/2012', 4,99, 1, NULL);
INSERT INTO `mydb`.`Factura` (`Codigo`, `Fecha_compra`, `Importe`, `Unidades_vendidas`, `dni_cliente`) VALUES (000004, '13/06/2012', 10,95, 3, '78956444X');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Medicamento_Factura`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Medicamento_Factura` (`Codigo_m`, `Codigo_f`) VALUES (0000001, 000001);
INSERT INTO `mydb`.`Medicamento_Factura` (`Codigo_m`, `Codigo_f`) VALUES (0000002, 000001);
INSERT INTO `mydb`.`Medicamento_Factura` (`Codigo_m`, `Codigo_f`) VALUES (0000003, 000002);
INSERT INTO `mydb`.`Medicamento_Factura` (`Codigo_m`, `Codigo_f`) VALUES (0000001, 000002);
INSERT INTO `mydb`.`Medicamento_Factura` (`Codigo_m`, `Codigo_f`) VALUES (0000002, 000002);
INSERT INTO `mydb`.`Medicamento_Factura` (`Codigo_m`, `Codigo_f`) VALUES (0000003, 000003);
INSERT INTO `mydb`.`Medicamento_Factura` (`Codigo_m`, `Codigo_f`) VALUES (0000001, 000004);

COMMIT;

